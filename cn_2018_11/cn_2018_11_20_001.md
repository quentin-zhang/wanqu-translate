由阿米尔Manasawala和米切尔科赫,软件工程师 
 客户在北美DoorDash发现和秩序来自一个巨大的选择他们最喜欢的商店。我们的使命是表面最好的商店我们的消费者根据他们的个人喜好。然而,“最好的商店”的概念对于消费者基于他们的饮食差别很大,味道,预算和其他偏好。 
 为了实现这一任务,我们正在建设搜索产品,提供个性化的发现和搜索体验基于消费者过去的搜索和DoorDash订单历史。这篇文章详细描述了我们的方法在我们的搜索个性化的生态系统,它提供了一个显著提升转换从搜索到结帐。 
 DoorDash平台的三角形的性质(包括消费者、气宇轩昂的男子和商人)带来了很多有趣的和独特的搜索挑战除了通用搜索和推荐相关的问题。一些挑战包括: 
 我们使用Elasticsearch电力消费者搜索我们的网站和应用程序。Elasticsearch是一个开源的、分布式、Lucene-based反向索引,提供搜索引擎功能而不重新发明轮子。 
 对我们的搜索引擎有两个主要组件: 
 第一个是索引模块(线下)。这个组件从数据库读取存储对象(在我们的例子中Postgres)并将其写入Elasticsearch引导,以及部分异步更新数据库存储对象。 
 二是搜索模块(在线)。Web和移动客户端API调用后端搜索与指定的消费者的位置。构造一个基于json Elasticsearch查询在Django端Elasticsearch打电话来。Elasticsearch内执行查询来检索相关的结果,这是反序列化并返回给客户机。Elasticsearch查询主要是为了达到两个目的: 
 现在让我们来谈谈个性化的ML模型的训练和测试。Elasticsearch包括个性化,我们定义了一个基于知识的推荐系统/消费者/存储对。为每一个消费者,我们正在评估多好每个特定的商店的建议是基于消费者的订单历史和页面浏览量。 
 为了帮助我们,让我们定义一些基本术语(注意,介质不处理好方程,所以提前道歉janky格式): 
 消费者为c_i的数据资料主要是指所有的数据,我们需要作为推荐的信号模型。我们存储和更新d(为c_i)为每个数据库中为c_i在线管道使用。 
 数据的存储s_j存储在索引Elasticsearch的管道。 
 f ^ k是一个机器学习模型中的功能和f ^ k_ij的特定值(为c_i s_j)。例如,一个特性我们包括菜系之间有多少重叠消费者为c_i下令从过去和商店s_j的美食。我们将包括类似的特性基于浏览商店页面,价格区间,等培训,我们生成f ^ k_ij对于每一个我,j为c_i, s_j相互可见从前面描述的选择标准以及0/1国旗,生成数据在以下格式: 
 (0/1国旗,f ^ 0 _ij f ^ 1 _ij f ^ 2 _ij…f ^ k_ij…]对于每一个我,j,这样为c_i s_j落在可选择的范围内。 
 正面例子(标记为1的数据模型)的消费者为c_i从那家商店订购和底片的,尽管商店接触消费者,消费者没有秩序。 
 我们使用这些数据来计算的概率从s_j由消费者为c_i排序: 
 概率(为c_i订单存储s_j) = 1 / (1 + e ^ (1 * (w_k * f ^ k_ij)))在w_k k的重量特性。 
 我们训练数据使用逻辑回归模型来估计w_k ou 
 r数据集。 
 现在,让我们讨论一下我们如何个性化作品融入Elasticsearch生态系统,是我们在实时应用程序和网站。实现得分我们必须实现上述逻辑回归Elasticsearch内部评分功能。我们完成了,通过脚本Elasticsearch评分的特点,用于定制的排名,如我们的用例。这个脚本可以访问文件里面Elasticsearch和参数可以作为运行时参数传递的Elasticsearch查询。然后用于脚本生成的得分排名基于脚本的排序功能所需的排名。 
 下图描述了总体体系结构描述离线和在线组件。 
 我们只触及表面的工作我们已经完成。这里有一些领域,我们正在使我们的搜索引擎更好: 
 如果你对解决具有挑战性问题充满激情在这个空间,我们正在招聘搜索和相关团队和数据基础设施团队。如果你有兴趣在其他领域工作DoorDash看看我们职业页面。让我们知道任何的意见或建议。 
 提供好。你最喜欢的restaurants-right上门。点菜了www.doordash.com。 
 DoorDash的官方博客上,一家位于旧金山的技术公司热衷于改变当地企业和专门启用新的工作方式,收入和生活。点菜了www.doordash.com。 
  
   
  URL : https://blog.doordash.com/powering-search-recommendations-at-doordash-8310c5cfd88c?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website