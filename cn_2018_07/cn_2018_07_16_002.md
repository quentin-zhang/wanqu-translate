几年前,我有幸成为一名工程师在Google团队照片,2015年首次推出的一部分。很多人导致了产品——设计师、产品经理、研究人员,和无数工程师(在Android、iOS、网络和服务器)的名字只是一些主要的角色。我的责任是web UI,更确切地说这张照片网格。 
 我们想尝试一些雄心勃勃的同时支持宽屏(合理)的布局,保持每张照片的长宽比,是scrubbable(即让你跳到任何部分的档案),处理成百上千的照片,滚动60 fps,立即和负载附近。 
 当时没有其他相片画廊支持所有这一切,和我所知他们仍然没有。虽然许多其他画廊现在支持这些功能通常广场作物每张照片的布局工作。 
 这是一个技术写了关于我们如何解决这些挑战,和peek的引擎盖下web版本的谷歌照片是如何工作的。 
 这两个都是规模最大的挑战。 
 第一规模的挑战是为用户提供大型图片集(和一些用户能耗照片上传)有太多的元数据。发送甚至最小的信息(照片url,宽度、高度和时间戳)是全面收集许多字节的数据,这将直接违背我们的目标不再加载。 
 第二大挑战是照片本身。与现代HDPI屏幕,即使是很小的照片缩略图通常是50 kb或更多。一千缩略图可能50 mb,不仅是许多下载,如果你想立即把他们所有的网页浏览器可以慢下来。旧的Google +照片后会变得缓慢滚动1000 - 2000照片和Chrome 10000年加载后的标签最终崩盘。 
 让我们讨论分解成各个部分(你可以搜索粗体标题直接)。 
 有一些方法来处理大型集合。最古老的可能是分页,你显示一个固定数量的结果并单击“下一步”后续批次,令人作呕。更流行的现代方法是无限滚动,如此命名是因为当你只加载一个固定数量的结果你滚动接近结束时自动获取下一批和插入的页面,重复;如果做得好,用户可以继续不断滚动(看似无限的),而不需要停止。 
 分页和无限滚动共享一个相似的缺点,你需要加载所有最早的内容到最后,所以发现照片从年前可以成为一件苦差事。 
 对于一个正常的文档滚动条功能如何期望,和更好的你可以抓住它并迅速跳过整个部分直接跳到最后,或任何其他点。与分页页面的滚动条将触底(但不是图书馆),和一个无限滚动页面滚动条总是改变,如果你拖到最后你会发现它往后点随着页面了。 
 支持跳任何部分的照片,我们需要预先分配空间页面滚动条代表。那将是相对容易的如果我们有所有照片的信息,但随着发送太大,我们需要以不同的方式这样做。 
 这是许多其他scrubbable画廊走捷径——他们作物每张照片到一个相同的正方形。这种方式,你只需要知道照片的总数来计算整个页面布局:对于一个给定的平方大小你可以非常带视窗的宽度,用它来计算行和列的数量: 
 只有三行代码的大小,然后呈现和位置的照片几乎一打。 
 这个应用程序 
 罗奇我们提出了减少初始大小的元数据细分用户收集的照片为离散部分,和初始负载发送部分和计数。例如,一个简单的方法部分照片将通过月——你可以计算这些服务器上(或pre-compute)甚至数以百万计的照片跨越几十年,这仍然是一个小的数据量。数据的一个非常基本的表示可能看起来像这样: 
 在极端情况下这可能仍有问题的用户拍很多照片在接下来的一个月内(如专业摄影师)——部分的目标是减少每一桶可管理的元数据,但对于重度用户一个月可能仍然包含成千上万的照片(因此兆字节的数据)。值得庆幸的是聪明的基础架构团队胜过自己,建立了一个复杂的解决方案,考虑了各种各样的东西(如地理位置、近似时间戳等…)为每个用户创建自定义部分。 
 有了这些信息,客户端可以估计每个部分需要多少空间,把一个占位符到DOM,然后当用户快速滚动,从服务器检索相应的图元数据,计算完整的布局,并更新页面。 
 在客户端,一旦我们有部分的元数据,我们更进一步和部分照片在每个部分进入个人的日子。我们讨论了动态分割(如位置、人、日期、等…)仍有可能使一个伟大的未来特性。 
 估算截面尺寸是非常容易,你可以把照片的计数部分乘以一个最佳猜测一个正常的比例: 
 幸运的是我最初overthought这部分问题(原因我将解释在布局部分)但事实证明,你不需要估计非常好(以及大量的照片通常是错误的成千上万的像素)。唯一重要的是估计是模糊的代表,滚动条的外观精度。 
 简单的技巧是,当你最终加载部分计算估计高度之间的差异和实际高度。如果你只是转变是有区别的部分它下面的金额。 
 如果你加载部分高于滚动点你可能还需要更新滚动的位置。然而所有可以做的仅仅几分之一秒,在一个动画帧,所以看不到区别给用户。 
 所有合理的图片我知道用一个巧妙的布局,如果相对简单,方法:他们接受是好的网格高度不同的行。一行中的所有照片比例相同的高度,而且每一行都是一样的宽度,但任何两行可能不同高度,不同的是通常不是很明显。 
 放弃一个统一的高度你可以保持每张照片的比例而实现一个固定宽度的网格均匀间距。算法实现甚至不是很难,你选择一个最大行高度,然后一次一个照片你身高的照片,规模增加其宽度运行记录,每次宽度超过你每张照片缩小的窗口行,直到它适合宽度(高度将变短)。 
 例如布置14照片: 
 这是一个很天真的解决方案,但好工作;Google +使用它,谷歌搜索使用的一种形式,和Flickr请开源的实现在2016年(这是稍微聪明和检查如果是更好的扩大与一个更少的照片或按比例缩小的额外的一个)。可以简单的代码: 
 我的理论是,一旦我们估计一个布局我们应该能够适应区域的照片。这本质上是一个换行的问题,在很多方面类似于文本布局(包装吧 
 ds在文本来证明一个段落)。Knuth &布特就换行算法是一个很好的记录动态规划的方法,我觉得可以用于照片布局。 
 它通过一个组合框,胶水,和罚款。框是不可分割的块定位(通常这个词,但有时字符),胶块,可以拉伸或萎缩(通常的空白行),和罚款可以应用于阻止某些事情(通常用连字符号连接或换行符)。 
 在下图可以看到之间的胶盒不同大小的线。 
 照片的布局有一些不同但他们实际上使它更简单。对于文本,有很多人会接受更多的变化——你可以改变间距的话,你甚至可以改变一个单词的字母之间的间距,可以用连字符号连接mid-word。照片,人们发现它分散照片大小不同,之间的利润率和photo-hyphenation甚至没有意义。 
 有一些伟大的ups写在文本算法是如何工作的,但这里是我们适应它的照片。 
 照片成为了盒子,我们可以完全滴胶的概念,可以简化和罚款。尽管现在我说,也许它更类似于说我们把盒子这照片是胶水(即灵活布局的一部分是照片不是空格)。也许我们只是有粘盒? 
 而不是改变间距照片,我们会按照其他合理的方法布局和调整行高。大部分时间会有多个位置连续包装,包装前会给高行(扩大填补宽度),包装后会给短行(按比例缩小以适应)。通过考虑所有可能的排列的行,我们可以找到一个最适合所需区域。 
 这意味着我们剩下的三个主要因素:理想的行高,最大损耗因子(多少我们可以规模连续低于理想),和最大拉伸因子(多少我们可以扩大)。 
 算法是通过检查每一次照片,寻找容许行减免——即一组照片,当缩放以适合宽度将会有一个高度,落在接受范围之内(maxShrink高度≤≤maxStretch)。每次找到一个允许把它添加到列表的可能性,并从那里寻找容许优惠等等,直到它已考虑每一个照片和每一个可能的行集。 
 14照片,例如,与一个可接受的行可能是3或4照片后,如果我们打破3会有一个可接受的打破在6或7,虽然如果我们打破4会有可接受的休息时间在7或8。这些代表多个完全不同,然而所有有效,网格布局。 
 最后一部分是计算为每一行一个坏的分数。这是多么理想。连续目标高度有坏处得分为0,和更多的连续收缩或拉伸然后坏处得分越高。每一行的最终成本(这将是有意义的时刻)计算使用缺点,通常的多维数据集或广场坏处加上一些处罚(如换行符)。有许多文章如何计算坏处和缺点,在我们的示例中,我们使用的力量比每一行的最大拉伸/收缩大小(权力更严重惩罚行与理想还有很长的路要走)。 
 运行算法最后一图的节点,每个节点代表一个可能的打破,照片和每条边代表一行(可能有多个边缘对于任何给定的节点,表示可能有多个破发点时从任何照片)。为每个这些边我们可以分配一个成本(缺点值)。 
 作为一个例子,我们14日照片,目标行高(180 px),和一个给定的视窗 
 (1120 px),可能发现19行安排(边缘),导致12独特的网格排列(或路径通过图)。下面显示的是每一个独特的行,它可以连接到的可能行。蓝色的路线是最糟糕的(我敢说最好?)一个。如果你遵循的你会发现每个组合构造一个完整的网格包含每张照片——没有两行是相同的,和没有两个电网相同。 
 找到最佳照片网格(即最低组合的一组坏行)很简单,计算最短路径图。 
 幸运的是,我们生产的图是所谓的有向无环图(DAG),这是一个没有循环,你只会朝着一个方向走(你不能重复节点/照片)。这意味着计算最短路径可以在线性时间内完成(计算机说话很快)。更好的是,我们可以计算出最短路径在我们生产图。 
 计算路径的长度我们简单地加起来成本分配给每一行,每一次我们找到一个新的边缘连接到一个节点,检查是否这使得更短的路径,节点开始——如果记住它。 
 下面是一个例子的计算机“看到”,因为它是通过这些照片14——顶线显示了目前看照片(行)的开始和结束的照片,下面的图表显示的是发现了破发点,和边缘连接,每一点将突出粉色当前每个节点的最短路径。这是图片的另一个表示图如上所示,每个框之间的边缘对应于一个独特的行。 
 从第一张照片找到一个可接受的断点在指数2,成本为114。然后找到另一个可以接受的断点指数3 9483年以更高的成本。现在需要检查这两个新索引(2和3),在那里他们可以休息。2它发现5和6,此时6的最短路径是通过2(114 + 1442 = 114)所以它标志着它。当图3发现一条通往6我们再核对一下成本,而是因为它是如此昂贵的最初3,总成本(9483 + 1007 = 9483)意味着6保持效忠2。对动画的最后你可以看到第一个路径11是理想和交换机当节点8。 
 我们继续做这个整个的照片,直到我们得到最后的照片(指数13)。此时的最短路径(和最佳布局)可以发现遵循最短的路线我们一路上标记(在蓝色的彩色动画)。 
 这是比较天真的算法产生的(左边),和一个自动换行算法实现(右边)。他们都是给定一个目标180 px的高度。你可以看到两个有趣的事情,一个是,总是天真的布局下,而另一个是自动换行只是高兴过去——然而自动换行算法产生一个网格更接近目标的高度。 
 我们发现在我们的测试中,自动换行(我们叫它FlexLayout)算法产生的客观和主观理想的网格。持之以恒网格产生更均匀的高度(行)之间的差异小,和的平均行高度更接近所要求的目标。那样明显更好的全景图片和其他边界情况,通常绊倒一个天真的算法——这是因为天真方法全景照片(超宽)将被添加到第一行考虑,所以经常比例非常小,因为在这一行已经可能有多个照片,而与FlexLayout被认为是所有可能的行,和那些过分缩小全景坏处值高,鼓励电网全景放置的位置的选择本身或与其他一些 
 。 
 有许多因素影响有多少可能的布局。更多的照片是最大的因素之一,但视窗的宽度也可以限制它,然后实际参数shrink-ability /伸能也有很大的影响。 
 你可以了解这个当看着图25照片在一个狭窄的,媒介,广泛的视窗。在狭窄的窗口只有几个断点可用但我们需要很多行,在窗口中有更多的断点,和在宽的窗口,我们不需要更多的断点实际上有多行少总安排。 
 独特的布局呈指数级增长的总数与照片的数量。为介质宽度布局视口我计算实际的一组照片,有独特的路径: 
 1000张照片有太多的计算机测量,所以实际上无法计数精确数量的独特路径(这是一个有趣的怪癖,在这种情况下该算法可以知道它几乎立刻发现最好的路径,即使它不能在合理的时间验证本身)。 
 我们可以估计的独特布局排列通过允许断点每行的平均数量和提高的可能的行数。大多数视窗支持2 - 3断点每一行,与大多数行大约5或更多的照片,你可以用2.5 ^球场布局的数量(数量/ 5)。 
 1000张照片,将是一个数量有79个‘0’。1260张照片有天文数字的布局。 
 如果你很好奇,也很迅速。100张照片的布局需要大约2/1000秒(2)女士。1000张照片需要10 ms,10000张照片需要50毫秒,100万张照片只需要1.5秒(我们测试过)。天真算法大约需要2 ms相比,3毫秒,30女士,女士和400相同的数字-更快,但不是一个有意义的程度。 
 因此,尽管最初的意图是尽可能使用大量的布局可以选择一个最适合的可用空间(即布局匹配估计),因为我们发现,我们可以顺利调整估计和实际之间的差距大小,它允许我们永远存在的用户提供最好的网格。 
 最后布局技巧,我们为每个部分做两次运行算法。我们第一次运行它在段列出的所有照片,第二次我们运行中的所有片段部分。主要原因是有时有很短的片段,不填一行,和布局算法将建议选项合并它们,和照片一样,它将考虑所有可能的组合最理想的选择。 
 有scrubbable照片和理想的布局不会如果浏览器不能处理它。本身,它实际上不能——幸运的是我们可以帮助。 
 最大的一个方式,网站可以感觉到慢(除了初始加载时间)在他们顺利如何响应用户交互,特别是滚动。浏览器尝试重新绘制屏幕每秒60倍的内容(60 fps),当他们成功时它看起来和摸起来很光滑,不可以觉得janky。 
 保持60 fps每次更新需要呈现仅16女士(1/60),浏览器需要一些时间本身——元帅的事件,解析样式信息,计算布局,将所有元素转换成像素,最后画出屏幕,叶子在10毫秒为应用程序做自己的工作。 
 页面表现最糟糕的事情之一就是有太多的元素。问题是两个褶皱:它会消耗更多的内存为浏览器(如在50 kb缩略图1000张照片是50 mb,崩溃的10000张照片,Chrome是半g);此外,它是更多的浏览器需要计算各个部分的样式和位置 
 年代,在布局和组合。 
 虽然大多数用户将有成千上万的照片库屏幕可以通常只有几十个。 
 所以,而不是将每张照片放到页面并保持它,每次用户滚动计算照片应该是可见的,并确保它们在文档中。 
 任何照片,用于在文档中,但不再是可见的,我们把它拉出来。 
 而滚动页面有可能从未超过50个的照片现在,即使你滚动成千上万。这使页面时髦,防止撞选项卡。 
 因为我们组照片分门别类,部分我们可以经常走捷径和分离整个团体而不是每个单独的照片。 
 谷歌开发者网站上有一些很棒的文章关于渲染性能以及如何使用谷歌浏览器内置的强大的分析工具——我在这里涉及几个方面,因为它适用于照片,但其他增记是很值得一读。首先要理解的是页面呈现生命周期: 
 每次有一个改变页面(通常由JavaScript,但有时CSS样式或动画)然后浏览器检查风格适用于受影响的元素,重新计算布局(大小和位置),然后描绘的所有元素(即转换文本、图像等像素)。效率通常浏览器将页面分成不同部分它调用层和油漆这些分别,所以最后一步合成(安排)执行这些层。 
 大部分时间你永远不需要考虑这个问题,浏览器是很聪明,但如果你不断改变的页面(例如不断地添加或删除照片),那么你需要有效的做到这一点。 
 我们更新最小化的一种方法是定位相对于其父母的一切。部分绝对定位相对于网格,段定位绝对相对于他们的部分,和瓷砖(照片)是绝对定位相对于段。 
 这意味着,当我们需要移动部分,因为估计和实际布局高度是不同的,而不是需要数百或数以千计的修改每张照片下面,我们只需要更新以下部分的最高位置。这种结构有助于隔离每个网格的一部分不必要的更新。 
 现代CSS甚至提供了一种方法,让浏览器知道——包含关键字可以表示一个元素到什么程度可以被认为是独立于DOM。我们注释部分和相应的部分。 
 还有一些简单的性能缺陷,例如滚动事件可以多次在一个框架,和相同的调整。没有必要强迫浏览器重新计算风格和布局第一事件如果你将改变他们第二次。 
 幸运的是有一个方便的方法来避免这样做。你可以问下之前的浏览器来执行一个特定的函数重新油漆用window.requestAnimationFrame(回调)。在滚动和缩放处理程序,我们使用这个来安排一个回调,而不是立即更新,调整我们更进一步,延迟半秒,直到用户更新已经选定了最终的窗口大小。 
 第二个常见的陷阱是称为布局。一旦浏览器计算布局,缓存,所以你可以愉快地请求宽度,高度,或任何元素的位置很快。然而如果你进行任何更改属性,可能影响布局(如宽度、高度、上、左)你立即失效缓存,如果你再次阅读这些属性之一,浏览器将被迫重新计算布局(也许多次在同一帧)。 
 这可以导致问题在哪里吗 
 在循环更新许多元素(比如数以百计的照片),如果你读的每个循环的一个布局属性,然后改变它们(比如照片或部分移动到正确的位置),那么你就引发了新的布局计算每一步的循环。 
 简单的方法来避免这种情况是第一次读到所有你需要的值,然后把所有的值(即批处理和单独的读与写)。对于我们的例子中我们避免读值,而不是跟踪每张照片的大小和位置应该在,和绝对位置。滚动或调整我们可以重新运行所有的计算基于位置我们一直在跟踪,并安全地更新知道我们永远不会打。这是一个典型的滚动框是什么样子(一切都只叫一次): 
 除了Web Workers,一些本机异步处理程序获取API一样,一切都在一个标签基本上运行在同一个线程,渲染和JavaScript。这意味着任何代码开发人员运行将防止页面刷新,直到它完成——例如长期滚动事件处理程序。 
 两个最耗时的事情我们的网格布局和元素的创建。对于我们试图限制他们的基本操作。 
 例如,布局算法需要10 ms 1000照片和50 ms 10000 -这可能消耗我们的整个框架津贴。但是给我们我们的网格细分成几个区域和部分我们通常只需要布局几百张照片在任何时候(需要2-3ms)。 
 最“昂贵”的布局调整大小事件应该是一个浏览器,因为这需要我们重新计算每个部分的尺寸。相反,我们回到简单的估计计算,即使对加载部分,只有执行的完整FlexLayout目前可见的部分。我们可以推迟其他部分的完整布局计算,直到我们滚动回他们。 
 同样发生在元素我们只创建照片瓷砖之前我们需要他们。 
 所有努力工作的最终结果是一个网格,可以保持60 fps的大多数时间,即使偶尔滴一些帧。 
 这些掉帧通常发生重大布局事件发生时(如插入一个全新的部分)或偶尔当浏览器上执行垃圾收集非常古老的元素。 
 我怀疑大多数前端工程师都会同意花招扮演了一个角色在许多良好的用户界面。关键是选择使用什么烟和如何角镜子。 
 我最喜欢的例子,这是一个秘密,一个同事在YouTube和我分享。当他们第一次实现了导航进度条(红色栏顶端出现当你改变页)他们没有实际测量进展的方式,所以他们只是动画速度大多数页面,然后它的“挂起”末期,直到页面实际上负荷。我不知道如果当前版本仍然假装或如果它确实有效,但关键是没关系。 
 在这一节中我将分享一些技巧我们使用谷歌照片显得比实际快一点——主要是我们如何伪装图像加载时间。 
 第一,可能最有效的,我们做的是预先加载内容,我们认为你要看看。 
 后加载任何可见的瓷砖我们试图保持领先所以缩略图页面加载的时候你滚动。 
 然而,特别是对于HDPI屏幕(我们需要加载大缩略图),如果你快速滚动,网络连接可能无法满足所有的要求。 
 我们处理,通过加载非常小的占位符多达4或5全屏幕在未来,并取代他们一旦靠近窗口。 
 这意味着,如果你是滚动速度相对缓慢(适合实际上看 
 荷兰国际集团(ing)在所有照片),那么你应该从来没有看到任何加载,如果你擦洗迅速(速度表明你正在寻找一个图)我们可以给你足够的视觉上下文来指导你的搜索。 
 这是一个复杂的权衡over-fetching做不必要的工作内容,并提供一个更好的体验。 
 我们考虑几个因素。第一件事就是观察滚动方向,只有预先加载内容用户正方向。我们也具有完整细节的缩略图测量滚动速度和箕斗装载一旦我们认为你擦洗,甚至在一个更高的分辨率阈值禁用低预加载如果你飞过的内容。 
 在每种情况下(正常的缩略图和低分辨率)我们缩放图像。现在,现代屏幕有如此高的分辨率看脆是常见的做法,以确保图像加载一个两倍的图像的空间填充然后收缩(所以有更实际的像素空间需要)。低分辨率的占位符我们要求非常小的图像,并以较低的压缩质量(如25%),然后是规模。 
 这里是一个沉睡的豹,左边的图像用于网格瓷砖满载时(按比例缩小到一半大小),右边的图像是低分辨率的占位符你只会看到如果你快速滚动(它会扩大)。 
 也观察到的字节大小。HDPI缩略图71.2 kb(gzip),而低分辨率占位符只有889 b(gzip)缩略图是80 x更大!换句话说,一个网格中的瓦4或更多的页面是一样的低分辨率的占位符。 
 最后小和低分辨率的图像块是我们如何联系问浏览器呈现它们。默认情况下,当你扩大一个图像浏览器将光滑一点(下图)中心,但这看起来并不很好。您可以应用模糊滤波器(最右边的图像),使它看起来更深思熟虑的,但是缺点是滤波器计算昂贵,如果你把它应用到数以百计的元素将影响渲染和滚动性能。所以我们选择走另一个方向,倾身我们的低分辨率要求浏览器离开图像像素化(最左边的图片)——老实说,我不确定如果今天这仍然是在产品中,有一些重构。 
 而希望用户永远不会看到它的低分辨率图像(快速滚动期间除外)后,更换他们在我们之前用过的窗口快速动画让人看起来他们加载(而不是闪烁到位)。,很容易通过覆盖两个图片和动画的不透明度(从完全透明到完全不透明的)——这同时淡出淡入跨web技术已成为非常普遍,例如媒体文章中的所有图像可能做到的。我相信同时淡出淡入低/高分辨率已经关闭,但它仍然发生空(灰色)瓷砖图像。 
 它看起来像正在加载中。我们迅速女士(100年),这是足够的时间来减弱,不放纵的感觉。我下面的动画更可观测的放缓。 
 我们第二次使用这种技术,当过渡到全屏视图从一个缩略图。当用户单击瓷砖具有完整细节的形象,我们立即开始加载同时规模和动画缩略图,当我们覆盖的完整图像加载和它们之间的不透明度动画。唯一不同的是这一次,因为我们只是将它应用到一个元素,我们可以使用更昂贵的模糊滤镜(这是方便的,因为像素化效果不那么迷人的大图像)。 
 在任何时候,当翻阅照片,或过渡到全屏视图,我们试图提供一个平滑的体验给用户,我总感觉它 
 回应他们的输入,即使内容还没有准备好。与之形成对比的是,如何会觉得如果当你点击一个瓷砖,它显示一个空白的屏幕上或者没有,直到加载完整的照片。 
 我们甚至将这一概念应用到空的部分。如果你还记得,我们的scrubbable网格时才加载部分需要(尽管像瓷砖它试图预装附近的部分)。这意味着,特别是如果你抓住未来滚动条和种族,你可以得到部分还没有加载——电网为他们预先分配的空间,但不知道去那里照片或布局是什么。 
 让滚动的感觉更自然的我们把纹理的卸载部分相同的高度目标行大小和颜色看起来像一个空的瓷砖。当我们第一次启动时,它只是看起来像行(最左边的图),尽管球队最近改变了纹理的行和列(最右边的图片),更紧密地接近照片。中间的图片部分加载时的样子,但瓷砖没有。 
 而不是使用一个图像的纹理,它实际上是使用CSS创建。这给加分,宽度和高度可以动态生成匹配目标行用于电网的高度。 
 我们有一些其他的技巧,但是他们主要是优先网络请求。例如,而不是大量的网络请求100图片缩略图,我们批成10左右,所以如果用户突然又开始滚动我们不得到90张照片加载,但没有使用。同样,我们总是优先加载可见在屏幕的缩略图。 
 我们甚至看是否我们已经加载一个同样大小的缩略图,可以使用它,而不是最后一个用例主要是浏览器的尺寸后,你经常会得到网格布局,几乎是相同的,但只有几行像素的不同。而不是重新下载每张照片我们将再次略规模图片我们已经(选择新的只有太多的区别)。 
 大量的照顾和关注进入谷歌照片的经验,每一个细节和照片网格是一个更大的一部分产品。 
 保持网格表现良好(和不断提高)一直是一个持续的团队优先考虑的。全面监控测量滚动的帧频,部分和图像加载时间,和许多其他指标,每年继续改善性能和体验。 
 这是一个短的屏幕截图的样子滚动一个画廊。以缓慢的速度具有完整细节的图片,你只看到我们加快你可以开始看到的像素化占位符尽快解决我们再次慢下来,我们种族前锋有一个短暂的看空的灰色瓷砖,直到网格追上了。 
 大感谢我以前的经理照片文森特莫,他除了支持,这篇文章中使用拍摄所有的照片(以及在开发过程中作为测试集)。Jeremy Selier,照片网络,和他的团队,继续保持和改善照片今天Web UI。 
 从一个快速起立鼓掌欢呼,鼓掌能表示你吃得多喜欢这个故事。 
 用户体验工程师@Google 
 谷歌设计是一个合作努力为首的一群设计师,作家,和开发人员在谷歌支持和进一步的设计和技术。我们的媒体特性强调了从设计集合。谷歌,谷歌的设计师和工程师写的原创内容。 
  
   
  URL : https://medium.com/google-design/google-photos-45b714dfbed1?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website