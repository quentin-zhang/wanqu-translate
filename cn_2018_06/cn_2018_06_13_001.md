图片由卢卡Biada,CC 2.0。 
 从档案、技术 
  
 乔恩·罗布森,维基媒体基金会 
  
  
 2018年4月20日 
 的历史页面预览。 
 预览现在卡片显示当你徘徊在一个链接呵呵yeeehh(是的,我皮肤使用维基百科的移动桌面浏览)。文本从维基百科文章冰山和水,3.0 CC冲锋队。图片从左到右,从上到下:# 1金汉森,CC冲锋队3.0;# 2安德烈亚斯的体重,CC冲锋队4.0;通过新西兰国家图书馆# 3,CC0。 
 几天前,我的团队完成了启动“页面预览”——现在的功能部署到数百个语言版本的维基百科。我们正看到一半一百万次点击每一分钟我们的API为那卡显示当鼠标悬停在链接。 
 表面上看起来很简单。许多网站已经。它有一个图像和一些文本和显示当你鼠标经过一个链接。几乎没有突破性的东西……看起来。 
 最初的想法是四年前,基于一个想法从志愿者/编辑之前许多年。 
 我们因此采取了几年这个每个人。这可能看起来很奇怪,但像冰山一样,一旦你开始看到它下面,这一切都是有意义的。 
 我们有几个数以百万计的网页,所有存储为原始wikitext。我们不能期望每一篇文章被编辑指定一个缩略图。 
 早在2012年,马克斯•Semenik软件工程师在我们社区技术团队,建立了一个扩展,将算法为一篇文章找出最合适的形象。 
 与所有算法一样,它并不完美,因为它不是设计用例的页面预览,它还需要调整。 
 我们必须更新限制文章的第一部分的图片。处理算法是困难的,但为此必不可少。 
 我们有几个数以百万计的网页,所有存储为原始wikitext。如何总结,没有问我们的编辑去和每条刻意这么做吗? 
 繁忙的马克斯Semenik帮助我们的缩略图,还写了一个扩展生成提取的文章。它最初主要为纯文本摘要。我们最初版本的页面预览使用这个,但是我们意识到这并不是最适合我们试图做什么。 
 我们停止使用这个。 
 我们意识到HTML是非常重要的。例如化学文章特色化学公式需要下标需要HTML。 
  
 需要考虑如何HTML生成摘要等内容,下标是重要的水的化学分子式,如图所示。文本的英文维基百科文章水、CC冲锋队3.0;3.0图像由金正日汉森,CC冲锋队。 
 我们的许多文章,首先位置信息和语音信息。这个内容不属于我们的总结和对其他内容不太清楚是什么。摘要有很多设计输入和我们确定哪些内容不应该出现在一个预览。我们写了一个规范捕获所需的行为。 
  
 位置信息功能的许多文章证明问题总结维基百科的文章… 
  
 发音一样…信息。 
 最后我们决定在一个API之上构建最初的建立对我们本地Android和iOS应用程序。我们创建了一个新的API专门为这个目的。 
 我们现在从整篇文章的HTML生成摘要。我们解析它就像每规范识别浏览器和第一段“空”导致的每一篇文章。 
 这里的重大挑战之一,是决定带括号内的内容。因为我们支持超过300种语言必须本地化(不是所有人都使用相同的字符集!)。 
 不仅如此,当然一些括号…边界情况至关重要 
 无处不在。我们不得不考虑他们所有的潜在的使用和如何做。 
  
 有时圆括号里面的内容很重要,因为这个例子说明。识别时,重要的是努力。文本元素周期表上的英文维基百科文章,CC冲锋队3.0;图像由Offnfopt,公共领域。 
 剥离附加用户生成HTML的元素也被证明是很困难的。而在纯文本需要一个简单的正则表达式,情况变得更加复杂,当你考虑嵌套的HTML。 
 是很重要的,以确保内容继续用圆括号里面的内容有意义了,我们我们没有添加任何安全漏洞。 
 要感谢我们的基础设施团队帮助我们构建出这个API。 
 我们的编辑社区很多关心我们的产品。这就是为什么他们对你在业余时间写文章,没有货币收益。 
 我们在过程的每一部分,包括他们不知疲倦地与他们合作来解决每一个边界情况(是否被总结,或不适当的图像),让我们知道我们在做什么,为什么我们做的影响,为什么我们继续做。 
 我们最初的版本不够好。我们的社区要求我们不继续进行。我们通过聆听他们,使其更好的回答。 
 谢谢你帮助促进社区和社区联络人那些对话! 
 我们做了很多。我们的设计师,Nirzar做了一个伟大的写这里我不会共享任何更多,但设计过程的每一步是否最初的原型(谢谢Prateek Saxena !);与我们讨论的性能特性性能团队;完善缩略图和总结;或与我们的社区。 
 谢谢你的设计团队! 
 这是一个巨大的变化,人们如何与我们的内容互动。我们非常关心隐私在维基媒体。我们可能是为数不多的几个(? !)主要网站不安装第三方脚本跟踪你。 
 我们的隐私政策禁止我们放弃关于你的数据。 
 我们不使用供应商A / B测试或分析用户的行为。 
 然而,尽管如此,我们不会偷工减料。 
 我们不想做愚蠢的风险变化。 
 每次我们构建主要建设基础设施来评估它。我们构建推测和测试来测试这些推测。我们建立它。我们测试它。我们听数据。我们适应。我们再次测试。 
 这意味着我们兼顾作为产品团队和分析团队。我们的开发团队担任多个职务。鉴于我们的工作需要处理错误。偶尔,我们发现浏览器厂商的主要缺陷。 
 我们最后的A / B测试Tilman拜耳给了我们很多的答案。这是一个非常值得一读! 
 鉴于,A / B测试的结果我们也决定开始测量“页面预览视图”作为一个额外的页面浏览量。指标是用每秒1000事件和我们分析团队踢屁股处理这样的规模。 
 谢谢分析师分析团队! 
 我们看到一分钟050万次点击我们的API。 
 我们看到一分钟050万次点击我们的API。 
 我说两次,因为这是一个大量的流量。 
 我们传统api最初建造机器人来帮助清理你的编辑。他们不为读者设计的。 
 维基媒体服务团队已经成功的至关重要的这个项目通过提供基础设施来处理,处理大量的缓存(我们严重依赖清漆)并确保当内容编辑新得到生成的摘要。众所周知,计算机科学缓存失效是一个困难的问题。 
 谢谢你的服务团队! 
 航运的东西总是感觉很好。我希望“简单”预览我的团队的帮助下很多团队在维基媒体基金会已经运来丰富你的 
 体验。 
 显然很多人都参与其中,我们为我们骄傲。 
 我们还没有做完。软件是永远做不完。 
 我们有代码清理和新想法如何种植这个小功能。 
 也许有人会说我们只看到了冰山一角。 
 推荐- - - - - - 
 维基媒体基金会是一个非营利性和依靠捐赠给像你这样的人,网站运行在这样一种方式生活我们的价值观。帮助我们继续构建这样的特性,请捐助我们。 
 乔恩·罗布森、高级软件工程师、桌面和移动网络 
 维基媒体基金会 
 想了解更多吗?看到最初的公告,我们如何设计页面预览。 
 这篇文章最初发表于“兔子洞”,“我们中出版,并修改为re-publication维基媒体的博客。这两篇文章已经被编辑修复typo-our API接收每分钟一百万支安打,而不是五千年。 
 ashalimov 2个月 
 很好的特性,但是不得不关掉它。如果bug报告正确的地方吗?如果我打开一个新标签通过鼠标滚轮在后台点击,我点击的链接就选择(下划线),我每次滚动这个页面弹出预览,这很烦人。最新Win10 Chrome。也很好能够调整这个特性(例如,关闭图像)。 
 乔恩·罗布森2个月 
 优素福埃尔多安(@erdogany)关于延迟…我们有一个超级迷人的性能和设计之间的会议。这里的结论是总结:https://phabricator.wikimedia.org/T70861 https://phabricator.wikimedia.org/T70861但整个对话文件赞成和反对的理由,最终决定。 
 corveroth 2个月 
 的处理性能,文本提取省略处理(昂贵的)模板(如信息框)? 
 乔2个月 
 的处理性能,文本提取省略处理(昂贵的)模板(如信息框)? 
 优素福埃尔多安(@erdogany)2个月 
 @ckoerner 
 谢谢你的回复。我可以看到有一个延迟显示弹出但不是api调用。所以不需要看到弹出的调用。没什么大不了,但是我想这可能会降低你的电话有点…感谢这个伟大的功能。 
 ckoerner 2个月 
 嘿,所有的, 
 和我一起工作的团队建立这个特性。我想给一些回复你。对不起,我不能在这里线程的东西。:) 
 @umair 
 引导的句子可以在插入——没有非常详细的信息实际上告诉读者对文章的主题!用户:Kaldari(等)写过关于这个问题。https://en.wikipedia.org/wiki/Wikipedia Wikipedia_Signpost / 2017-06-09 /专栏 
 埃尔多安@Yusuf(@erdogany) 
 有一个微妙的推迟预览。研究和测试团队后500毫秒(半秒)盘旋之前出现。 
 @Josef Sipek“杰夫” 
 是的,另维基人看过这一段时间了。我们非常感谢他们的反馈我们的特性。英语和德语(最后两个维基百科的查看功能默认)是两个大的wiki有一些技术问题和社区讨论导致此之前推出。 
 @ElG 
 团队很兴奋看到乔恩的那样得到了可访问性倡导者马西萨顿的注意,有一些好的事情(和有帮助的反馈)的可访问性组件功能。还有更多我们可以改进!https://a11ywins.tumblr.com/post/173072286008/wikipedia-link-preview 
 @sukima,@Abdullah ARIKAN等等 
 ❤️ 
 umair 2个月 
 这是很酷。你为什么要带括号内的内容吗? 
 弗兰克·m·2个月 
 伟大的工作!谢谢你分享这些幕后的故事和挑战,谢谢你美军陆军评估的输入 
 思路! 
 你们考虑使用一个较小的字体预览卡吗? 
 优素福埃尔多安(@erdogany)2个月 
 我认为一个明显的改善会不打电话当你移动鼠标链接,或者加一点延迟。现在似乎立即让几个电话当我移动我的鼠标在页面。 
 约瑟夫“杰夫”Sipek 2个月 
 谢谢你的写。我很高兴看到这个功能终于部署在英文维基百科。 
 我看到预览捷克维基百科现在一段时间——它是相同的实现吗?特别复杂的是英语吗?是在维基百科的大小(vs CS维基百科),“延迟”部署? 
 再次感谢! 
 ElG 2个月 
 谢谢你使它可以只用键盘用户像盲人! 
 sukima 2个月 
 下次经理问道:“但是你不能只是……?“我想他们指向这个页面!软件是非常复杂和困难。它并不容易,我想为你帮助提高认识是一个软件开发人员可以是多么困难。与一个行业高度集中在快速移动和治疗专业人员是一毛钱一打一词需要传播。作为一个社区,我们需要更好地解释外行人,仅仅因为你有一个想法为一个应用程序并不意味着它很容易。计算机编程是很有意思的浪漫化,但技术需要多年的经验,甚至过去的错误做改变非常困难。 
 我的帽子是你和你的团队。这是一个大冰山和更多的信贷与世界分享这个世界迫切需要认识到巨大的复杂性是软件专业人员的职业生涯。 
 阿卜杜拉ARIKAN 2个月 
 我很欣赏你的努力和承诺。你不仅破冰,也融化了。谢谢! 
 cmdr2 2个月 
 这真的是整洁的,谢谢你添加这个也写如何形成的故事! 
 两个评论- a)似乎发射一个XHR请求我每次移动鼠标光标在一个链接,所以我可以继续挥舞着我的鼠标一个链接,继续产生新的请求(即没有缓存),和b)火灾的请求只要鼠标移动,因此发射了一堆请求如果鼠标移到一个页面,不需要他们。 
 的请求可能只有一只老鼠在一个链接至少50毫秒,和短的缓存可能是有用的吗? 
 Lynette洛根2个月 
 令人难以置信的,感谢你分享旅程和那些不知疲倦地工作来解决和实现这个很棒的功能! 
 评论都关门了。 
  
 更多的社区档案 
  
 维基媒体基金会,公司是一个非营利的慈善组织,致力于鼓励增长、发展和分布的自由,多语言内容,提供这些基于维基项目的全部内容向公众免费的。参与|登录 
 维基媒体基金会运作的一些世界上最大的协作编辑参考项目。 
 Wikimedia项目国际范围和维基媒体运动已经在世界各地产生重大影响。继续这一成功在组织层面上,维基是建立一个国际网络相关的组织。 
 这项工作是基于知识共享署名3.0 unported许可证。一些图片在CC冲锋队。 
 阅读我们的使用条款和隐私政策。|由WordPress.com贵宾 
  
   
  URL : https://blog.wikimedia.org/2018/04/20/why-it-took-a-long-time-to-build-that-tiny-link-preview-on-wikipedia/?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website