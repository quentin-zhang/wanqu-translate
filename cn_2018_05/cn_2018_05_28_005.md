马丁Zinkevich 
 本文档旨在帮助那些机器的基本知识 
 学习得到的好处谷歌在机器学习的最佳实践。它 
 介绍了机器学习的方式,类似于谷歌c++风格指南 
 和其他受欢迎的实用编程指南。如果你有一个类 
 在机器学习、建立或从事机器­学习模型,然后你 
 有必要的背景阅读本文档。 
 以下术语会反复有效的讨论 
 机器学习: 
 做出伟大的产品: 
 机器学习喜欢你伟大的工程师,不喜欢大吗 
 你不是机器学习专家。 
 你将面临的问题是,事实上,工程问题。甚至 
 的所有资源的一个伟大的机器学习专家,大部分的收益 
 来自伟大的功能,而不是伟大的机器学习算法。所以,基本的 
 方法是: 
 这种方法将工作得很好 
 长一段时间。偏离这种方法只有当没有更多的 
 简单的技巧来让你不动。添加复杂性降低未来版本。 
 一旦你疲惫的简单技巧,减少­边缘机器学习 
 事实上是你的未来。上看到的部分 
 第三阶段 
 机器学习项目。 
 本文安排如下: 
 机器学习是很酷,但它需要的数据。从理论上讲,你可以 
 数据从一个不同的问题,然后调整模型,一个新产品,但是 
 这将可能低于基本的启发式。如果你认为机器 
 学习将会给你增加了100%,然后是一个启发式会带你的50% 
 的方式。 
 举例来说,如果你是排名的应用程序在应用市场上,你可以使用 
 安装速度或启发式的安装数量。如果你是检测垃圾邮件, 
 之前发送垃圾邮件的过滤掉出版商。不要害怕使用人类 
 编辑。如果你需要等级联系,最近使用的排名 
 最高的(甚至按字母顺序排名)。如果机器学习不是绝对的 
 需要你的产品,不使用它直到你有数据。 
 形式化机器学习系统将做什么之前,跟踪一样 
 可能在你当前的系统。这样做有以下原因: 
 Google +团队措施扩大每读, 
 reshares每读,加上­每 
 /读阅读,评论,评论每个用户,每个用户reshares等使用 
 在计算一个帖子的美好时间。另外,请注意,一个 
 实验框架,你可以把用户分成桶和聚合 
 由实验数据,是非常重要的。看到 
 规则# 12。 
 通过对收集指标更自由,你可以获得一个更大的图片 
 你的系统。注意到一个问题吗?添加一个指标来跟踪它!兴奋一些 
 量变最后释放吗?添加一个指标来跟踪它! 
 一个简单的启发式可以让你的产品出了门。一个复杂的启发式 
 不可维护。一旦你的数据和你想的一个基本思想 
 完成,继续机器学习。在大多数软件工程 
 任务,你将会想要不断更新你的方法,是否它是一个 
 启发式或机器­学习模型,你就会发现 
 机­学习模型是容易更新和维护(见 
 规则# 16)。 
 专注于你的系统基础设施为您的第一个管道。虽然它是有趣的 
 想想所有你要做的富有想象力的机器学习, 
 很难弄清楚发生了什么,如果你不首先信任你 
 管道。 
 第一个模型提供了最大的促进你的产品,所以它不需要 
 花哨的。但是你会遇到比你更多的基础设施问题 
 期望。之前,任何人都可以使用的新的机器学习系统, 
 来确定: 
 选择简单的特性使它更容易确保: 
 一旦你有了一个系统,可靠地做这三件事,你做了 
 大部分的工作。你的 
 和一个简单的模型提供了基线指标 
 基线行为,您可以使用测试更复杂的模型。有些团队的目标 
 “中性”首次发射:明确de­重视的首次发射 
 机器学习收益,避免分心。 
 确保基础设施是可测试的,学习的部分 
 系统封装,以便您可以测试它周围的一切。 
 具体地说: 
 机器学习的不可预知性,所以确保你 
 有测试的代码创建示例培训和服务,然后呢 
 期间,您可以加载和使用一个固定的模型。此外,它是重要的 
 了解你的数据:明白了 
 实用的建议进行分析的大型的、复杂的数据集。 
 我们经常创建一个管道通过复制现有的管道(例如, 
 船货崇拜编程 
 ),旧管道下降的数据,我们需要新管道。 
 例如,Google +的管道的热 
 滴旧的文章(因为它是试图排名新鲜的文章)。这个管道 
 复制到使用Google +流,旧的文章 
 仍然是有意义的,但管道老帖子仍在下滑。另一个 
 常见的模式是只有被用户日志数据。因此,该数据 
 无用的如果我们想模型为什么没有被用户特定的帖子, 
 因为所有的负面例子已经放弃了。发生在一个类似的问题 
 玩了。工作时在回家玩应用程序,创建一个新管道也 
 包含示例的着陆页的玩游戏没有任何功能 
 消除歧义每个例子是从哪里来的。 
 通常机器学习正试图解决的问题 
 全新的。有现有的排名系统,或分类,或 
 无论你试图解决的问题。这意味着,有一群 
 规则和启发式。这些启发式调整时可以让你搭我的车 
 与机器学习。你的启发式应该开采等等 
 信息,有两个原因。首先,过渡到一个机器 
 学习系统将平滑。第二,通常这些规则包含很多 
 关于系统的直觉你不想扔掉。有四个 
 您可以使用现有的启发式方法: 
 要注意添加复杂性当使用启发式的毫升 
 系统。在新机器学习算法中使用旧的启发式 
 有助于创建一个平稳过渡,但想想是否有 
 简单的方法来实现同样的效果。 
 总的来说,实践良好的提醒卫生,比如警报可操作的 
 并拥有一个仪表板页面。 
 性能降低多少钱如果你有一个模型一天老吗?一个星期 
 老吗?四分之一老吗?这些信息可以帮助您了解的优先事项 
 你的监控。如果你失去了重要的产品 
 如果没有更新模型的质量 
 一天,有一个工程师看。大多数的广告 
 系统有新的广告服务来处理每一天,并且必须更新 
 日报。例如,如果毫升模型 
 谷歌播放搜索不更新,它可以有一个 
 在一个月的负面影响。一些模型的热 
 Google +没有贴标识符在他们的模型中 
 他们可以 
 出口这些模型很少。其他模型post标识符 
 更频繁地更新。还要注意,新鲜度可以改变随着时间的推移, 
 特别是当特征列添加或删除从您的模型。 
 许多机器学习系统有一个阶段你导出模型 
 服务。如果有一个问题一个导出的模型,它是一个用户­面临 
 问题。 
 在您导出模型做健康检查。具体来说,确保 
 模型的性能是合理的数据。或者,如果你有 
 挥之不去的担忧与数据,不要出口一个模型。许多团队 
 持续部署模型检查下的面积 
 ROC曲线 
 (AUC) 
 在出口之前。问题模型 
 不需要一个出口 
 e­邮件提醒,但问题可能需要一页面向用户模型。所以更好的 
 等待和之前一定影响用户。 
 这个问题发生比其他机器学习系统 
 类型的系统。假设一个特定的表,是加入了没有 
 正在更新时间。机器学习系统将调整,和行为 
 将继续是相当好的,逐渐腐烂。有时你发现 
 表个月过时,一个简单的更新提高了性能 
 比其他任何发射季!的报道 
 功能可能会改变由于实现更改:例如特性列 
 可以填充在90%的例子中,突然降至60%的 
 的例子。曾经有一个表是6个月,过期,让人耳目一新 
 表中单独安装速度提高2%。如果你跟踪统计 
 数据,以及occassion手动检查数据,可以减少 
 这些类型的失败。 
 如果系统很大,还有很多功能列,知道是谁创建的 
 还是保持每个特性列。如果你发现的人 
 理解一个特性列是离开,确保有人的 
 信息。尽管许多特性列有描述性的名字,它很好 
 有一个更详细的描述的特性是,它来了 
 预计,以及它如何帮助。 
 你有很多指标,或测量系统,你关心, 
 但是你的机器学习算法通常需要一个目标,一个 
 数量,你的算法优化“尝试”。我在这里区分 
 目标和指标之间:一个度量是任何系统的数量 
 报道,这可能是也可能不是重要的。另请参阅 
 规则# 2。 
 你想赚钱,让你的用户高兴,让世界更好 
 的地方。有很多你关心的指标,和你应该测量 
 (见规则# 2)。然而, 
 在机器学习过程的早期,你会注意到它们都上升,甚至 
 那些你不直接优化。例如,假设你关心 
 在网站上的点击数量和时间。如果你对数量的优化 
 点击,您可能会看到所花费的时间增加。 
 所以,保持简单,不要太努力思考平衡不同的指标 
 当你仍然可以很容易增加所有的指标。不要把这条规则 
 远:请不要将你的目标与终极的健康 
 系统(见 
 规则# 39)。 
 如果你发现自己直接增加 
 优化的指标,但是决定不开展,一些客观的修正 
 必需的。 
 通常你不知道什么是真正的目标。你认为你做但是当 
 你盯着并排数据和分析你的旧系统和新毫升 
 系统,你意识到你想要调整目标。此外,不同的团队 
 成员往往无法达成真正的目标。毫升的目标 
 的东西是容易衡量,代表“真正”的目标。 
 事实上,往往是没有“真正”的目标(见 
 规则# 39)。 
 所以 
 火车简单毫升目标,并考虑拥有一个“政策层” 
 允许您添加额外的逻辑(希望很简单的逻辑) 
 最后的排名。 
 最简单的模型是直接观察用户行为,归因于一个 
 行动的系统: 
 避免建模间接影响: 
 间接影响造就伟大的指标,可以在A / B测试和发射升空时使用 
 决策。 
 最后,不要试图让机器学习找出: 
 这些都是重要的,但也非常难以衡量。相反,使用 
 代理:如果用户是幸福的,他们会在网站上停留更长时间。如果用户 
 是满意,他们明天将再次访问。只要幸福和 
 公司健康而言,人类的判断需要连接 
 机器学习目的你基于“增大化现实”技术的产品的性质 
 e销售和 
 你的商业计划。 
 线性回归、逻辑回归和泊松回归直接 
 出于一个概率模型。每个预测可以看作是一个 
 概率或期望值。这使得它们更容易调试比模型 
 使用目标(零­——损失,各种铰链损失,等等),试一试 
 直接优化排名分类准确性或性能。为 
 如果概率在训练中偏离概率预测 
 一边­————­边或通过检查生产系统,这种偏差 
 揭示了一个问题。 
 例如,在线性、逻辑或泊松回归,还有的子集 
 平均预测期望等于平均的数据标签(1 - 
 校准,或只是校准)。这是真正的假设你没有 
 正则化算法已经收敛,它大约是 
 真正的一般。如果你有一个特性就是为每个示例1或0, 
 然后是1组3例子,特点是校准。同样的,如果你 
 有一个特点,1为每个示例,那么所有的例子吗 
 校准。 
 用简单的模型,更容易处理反馈循环(见 
 规则# 36)。 
 通常,我们使用这些概率预测做出决定:例如排名 
 在降低期望值的概率(即点击/下载/等等)。 
 然而,记住的时候选择使用哪个模型, 
 决定事项的可能性超过给定的数据模型(见 
 规则# 27)。 
 质量排名是一种艺术,但垃圾邮件过滤是一个战争。的信号 
 你使用来确定高质量文章将成为明显的人使用 
 您的系统,他们会调整他们的帖子有这些属性。因此, 
 你排名应该关注质量排名发布内容很好 
 的信仰。你不应该折扣质量排名学习者排名垃圾邮件 
 高度。同样,“低俗”内容应该是分开处理的质量 
 排名。垃圾邮件过滤是一个不同的故事。你必须认为 
 功能,您需要生成将是不断变化的。通常,有 
 将是显而易见的规则,你将进入系统(如果一篇文章有多吗 
 三个垃圾邮件投票,不检索,等等)。任何学习模型 
 每天更新,如果没有更快。的创造者的声誉 
 内容将发挥更大的作用。 
 在某种程度上,这两个系统的输出将被整合。保持 
 记住,在搜索结果中过滤垃圾邮件可能应该更积极 
 过滤垃圾邮件的电子邮件消息。这是真正的假设你没有 
 正则化,你的算法已经收敛。这大约是真的 
 一般来说。此外,它是一个标准的实践,从培训中删除垃圾邮件 
 数据质量分类器。 
 在第一阶段的机器学习系统的生命周期 
 重要的问题是训练数据进入学习系统,得不到任何帮助 
 感兴趣的指标检测,并创建一个服务基础设施。后 
 你已经有了一个端到端系统单元测试和系统测试仪器, 
 第二阶段开始。 
 在第二个阶段,有很多唾手可得。有很多 
 明显的特性,可以拉到系统中。因此,第二个 
 机器学习阶段涉及吸引尽可能多的功能 
 以直观的方式将它们组合起来。在这个阶段,所有的指标 
 仍然是上升的。到时将有许多的发射,它是一个伟大的时间 
 吸引大量的工程师,可以加入你需要的所有数据 
 创建一个真正了不起的学习系统。 
 不要指望这个模型你现在正致力于将最后一个 
 你将会启动,甚至你会停止发射模型。因此 
 考虑是否要添加的复杂性与这次发射将会慢下来 
 未来的发射。许多团队每季度推出一个模型或者更多 
 你们 
 农业研究所。推出新车型有三个基本原因: 
 无论如何,给一个模型的爱可以好:看着数据 
 喂养的例子可以帮助发现新的信号以及旧的,坏了 
 的人。所以,当你建立你的模型中,考虑是多么容易添加或删除 
 或重组功能。想想是多么容易创建一个新的副本 
 管道和验证它的正确性。考虑是否可以 
 有两个或三个副本并行运行。最后,不要担心 
 功能是否16 35到这个版本的管道。你会 
 下个季度。 
 这可能是一个有争议的观点,但它可以避免很多陷阱。首先 
 所有,我们描述什么是学特性。学特性是一个特性 
 通过外部系统(如生成一个无监督聚类 
 系统)或由学习者本身(例如通过分解模型或深度学习)。 
 这些可能是有用的,但他们可以有很多的问题,所以他们应该 
 不是在第一个模型。 
 如果你使用外部系统创建一个功能,记住外部 
 系统有自己的目标。外部系统的目标可能只是弱 
 与你目前的目标。如果你抓住外部的快照 
 系统,那么它会变得过时了。如果你更新的功能 
 外部系统,那么含义可能会改变。如果你使用一个外部系统 
 提供一个功能,请注意,这种方法需要大量的护理。 
 分解模型和深度模型的主要问题是,他们是 
 非­凸。因此,不能保证最优的解决方案 
 近似或发现,和局部最小值在每个迭代中可以找到 
 不同。这种变化使得很难判断的影响 
 改变你的系统是有意义的或随机的。通过创建一个模型 
 深的特性,你可以得到一个很好的基线性能。在这之后 
 基准是实现,你可以尝试更为深奥的方法。 
 通常一个机器学习系统是一个更大的一小部分图片。为 
 例子,如果你想象一个帖子可能会被用于热,很多人 
 将保险、reshare或评论一篇文章之前曾经所示是什么吗 
 热。如果你向学习者提供这些数据,它能促进新职位 
 上下文中,它没有数据优化。 
 YouTube观看下一个可以使用的手表,或者合作 
 手表(项多少次一个又一个的视频被观看 
 看着)从YouTube搜索。您还可以使用显式的 
 用户评级。最后,如果你有一个用户操作,您正在使用的标签, 
 看到行动文档在不同的上下文中可以成为一个伟大的 
 特性。所有这些特性使您能够将新的内容到上下文。 
 请注意,这不是关于个性化:如果有人喜欢 
 内容在此上下文中,然后找出谁喜欢它或多或少。 
 用大量的数据,简单学习数以百万计的比一个简单的特性 
 一些复杂的特性。标识符的文件和被检索 
 规范化的查询没有提供多少泛化,但你的一致 
 排名与你的标签头查询。因此,不要害怕组 
 功能,每个功能适用于只有很小一部分数据,但是 
 整体覆盖率在90%以上。您可以使用正则化来消除 
 特性,适用于例子太少。 
 有多种方法可以结合和修改功能。机器学习 
 系统,如TensorFlow允许你预处理数据通过 
 转换。 
 两个最标准的方法是“离散”和“十字架”。 
 离散化的连续特性,创造许多 
 离散特性。考虑一个连续的特性,比如年龄。你可以 
 创建一个特性即1年龄小于18岁的时候,这是另一个特征 
 1时年龄在18岁到35岁,等等。不深思t 
 他的边界 
 这些直方图:基本分位数会给你大部分的影响。 
 交叉结合两个或两个以上的特征列。一个特性列,TensorFlow的 
 术语,是一组同质特性,(例如{男、女},{我们, 
 加拿大、墨西哥},等等)。十字架是一个新特性列功能, 
 例如,{男、女}×{美国、加拿大、墨西哥}。这个新功能列 
 将包含这个特性(男,加拿大)。如果您使用的是TensorFlow和你 
 告诉TensorFlow为你创建这个十字架,这(男,加拿大)特性 
 在例子代表男性的加拿大人。请注意,它需要巨大的 
 大量的数据学习模型与跨越三个,四个,甚至更多 
 功能列。 
 列可能overfit跨越产生非常大的特性。例如, 
 想象一下你正在做的一些搜索,和你有一个特性列 
 单词查询中,你有一个特性列的单词 
 文档。你可以把这些与一个十字架,但你会得到很多 
 特性(参见规则# 21)。 
 在处理文本有两种可供选择的方案。最严厉的一个 
 点积。一个点产品在其最简单的形式简单的计数的数量 
 单词查询和文档之间的共同点。这个特性可以 
 离散。另一种方法是一个十字路口:因此,我们将有一个特性 
 当且仅当存在的“小马”一词在文档和 
 查询,另一个功能,当且仅当存在一词“的” 
 文档和查询。 
 有迷人的统计学习理论结果有关 
 适当的模型的复杂程度,但这规则基本上是所有 
 你需要知道。我有谈话的人怀疑 
 从一千例可以学到任何东西,或者你会 
 需要超过一百万的例子,因为他们被困在一个特定的方法 
 的学习。关键是你学习的大小规模数据: 
 最后,使用 
 规则# 28 
 决定使用什么样的特性。 
 未使用的功能创建技术债务。如果你发现你没有使用 
 特性,将它与其他功能不工作,然后下降 
 它的基础设施。你想要你的基础设施要保持干净 
 最有前途的功能可以尝试尽可能快。如果 
 必要的,有人始终可以再添加你的特性。 
 记住覆盖在考虑哪些特性来添加或保持。有多少 
 例子是覆盖的特性?例如,如果你有 
 个性化功能,但只有8%的用户个性化 
 功能,它不是非常有效。 
 与此同时,一些功能可能超水平发挥。例如,如果 
 你有一个功能涵盖只有1%的数据,但是90%的例子 
 的特点是积极的,那么这将是一个伟大的功能添加。 
 在机器学习的第三阶段,是非常重要的 
 关注的东西不是在任何机器学习课程:如何 
 看看现有的模型,改进它。这比一个更多的是一种艺术 
 科学,但有几个反­模式,它有助于避免。 
 这也许是最简单的方法让团队陷入困境。虽然有 
 很多好处fishfooding(在你的团队中使用一个原型) 
 自己(在你的公司使用一个原型),员工应该看看 
 性能是否正确。这显然是坏而改变 
 不应使用,任何生产应该附近看起来合理吗 
 进一步测试,通过支付非专业人员来回答问题 
 众包平台,或通过现场实验真实用户。 
 这有两个原因。第一,你太接近 
 代码。你可以寻找一个特定的方面的文章,或者你 
 感情方面太投入(如确认偏误)。 
 第二, 
 你的时间太宝贵了。考虑的成本工程师坐在9个 
 小时的会议,认为人类标签,买多少简约 
 众包平台。 
 如果你真的想有用户反馈,使用的用户体验 
 方法。创建用户角色(比尔巴克斯顿的描述 
 草图用户体验) 
 在过程的早期,做可用性测试(一个 
 Steve Krug的描述 
 不要让我认为) 
 以后。用户角色 
 涉及创建一个假设的用户。例如,如果你的团队都是男性, 
 这可能有助于设计一个35岁的女性用户角色(完整的用户 
 功能),看看它生成的结果而不是10个结果 
 25到40岁的男性。将在实际观察他们的反应 
 你的网站(本地或远程)可用性测试可以让你新鲜 
 视角。 
 最有用最简单的,有时你可以测量 
 任何用户都看着你的新模型的计算有多么不同 
 从生产的新结果。例如,如果你有一个排名的问题, 
 上运行两个模型样本通过整个系统的查询,看看 
 的大小对称差分的结果(加权排名 
 位置)。如果差别非常小,那么你可以告诉没有运行 
 一个实验,将会有微小的变化。如果是非常的不同 
 大,那么你要确保改变是好的。看着 
 查询,对称差分高可以帮助你理解 
 定性变化是什么样的。然而,确保该系统 
 稳定。确保模型相比,本身具有低(理想 
 零)对称的区别。 
 你的模型可能试图预测点击率。然而,最终,关键 
 问题是你所做的预测。如果您正在使用它 
 文档,然后最终的质量排名比更重要 
 预测本身。如果你的概率预测垃圾邮件和文档 
 然后对阻塞,截止的精度是被允许的 
 通过更重要。大多数时候,这两件事应该在 
 协议:他们不同意时,它可能会在一个小收获。因此,如果 
 有一些变化,提高日志但降解的性能损失 
 这个系统,寻找另一个特点。当这个开始更经常发生, 
 是时候重新审视你的目标模型。 
 假设你看到一个训练例子模型得到了“错误”。在一个 
 分类任务,这个错误可能是假阳性或假阴性。 
 在排名任务中,错误可能是一对,一个积极的排名较低 
 比消极的。最重要的一点是,这就是一个例子 
 机器学习系统知道它错了,如果有想修复 
 的机会。如果你给模型功能,让它来修复错误, 
 模型将尝试使用它。 
 另一方面,如果你想创建一个基于例子的特性 
 系统没有看到错误,这个功能将被忽略。例如, 
 假设在应用程序搜索,搜索“免费游戏”的人。假设 
 的结果是一个不相关的插科打诨应用。所以你创建一个功能 
 “插科打诨的应用”。然而,如果你安装数量最大化,和人 
 安装一个插科打诨的应用搜索免费游戏时,“呕应用”功能 
 不会有你想要的效果。 
 一旦你例子模型有错,寻找趋势 
 外你当前的特性集。例如,如果系统似乎 
 降职长的帖子,然后添加文章的长度。不要太具体了 
 你添加特性。如果你要添加文章长度,不要试图猜测 
 长意味着什么,只需添加一打特性和让模型算出该做什么 
 与他们(见 
 规则# 21 
 )。这是最简单的方法得到你想要的。 
 你的团队的一些成员将开始 
 沮丧的属性 
 系统他们不喜欢不被现有的损失函数。在 
 这一点上,他们应该尽一切努力把他们的抱怨变成固体 
 数字。例如,如果他们认为太多的“呕吐应用程序” 
 在玩搜索,他们可能评委确定插科打诨的应用。(你可以 
 轻松使用的人类­标签数据,在这种情况下,因为相对较小 
 分数查询占很大比例的流量)。如果你的 
 问题是可衡量的,然后就可以开始使用它们作为特征,目标, 
 或指标。总的原则是“衡量第一,优化第二”。 
 想象一下你有一个新的系统,看着每一个doc_id和exact_query, 
 然后点击的概率计算为每个查询每一个医生。 
 你会发现它的行为几乎是相同的在你当前的系统 
 ,A / B测试,所以它的简单,你启动它。 
 然而,你没有注意到新的应用程序被显示。为什么?好吧,既然你 
 系统只显示了一个医生根据自己的历史查询,没有 
 学习方法,应该显示一个新的医生。 
 了解这样一个系统的唯一途径将长期工作 
 火车只在数据模型时获得生存。这是非常 
 困难。 
 Training-serving倾斜是一个区别在训练和表演 
 在服务性能。它可以引起的: 
 我们发现生产机器学习系统与培训——谷歌 
 服务倾斜,对性能造成负面影响。最好的解决方案是 
 明确监控,以便系统和数据变化不引入倾斜 
 引起注意。 
 即使你不能这么做每一个例子中,做了一小部分,等 
 你可以验证服务和培训(见之间的一致性 
 规则# 37)。团队了 
 测量在谷歌有时对结果感到惊讶。 
 YouTube的主页 
 切换日志记录功能在服务时间和重要的质量 
 改进和减少代码复杂性,许多团队切换 
 他们的基础设施。 
 当你有太多的数据,有一种诱惑,把文件1 - 12, 
 忽略文件13 - 99。这是一个错误。虽然数据 
 从来没有显示用户可以删除,重要性权重最好的 
 休息。重要性权重意味着如果你决定你要 
 样例X以30%的概率,然后给它一个重量10/3。与 
 重要性权重,所有的校准属性中讨论 
 规则# 14 
 仍然保持。 
 说你加入文档id和一个包含功能的文档(如表 
 数量的评论或点击)。培训和服务之间的时间,特性 
 表可能被改变。你的模型的预测可能为同一文档 
 然后培训和服务之间的区别。最简单的方法,以避免这类 
 的问题是在服刑(参见日志功能 
 规则# 32 
 )。如果表 
 变化缓慢,还可以表每小时或每天快照 
 合理的数据。注意,这仍然没有完全解决 
 问题。 
 批处理是不同于在线处理。在网上处理, 
 你必须处理每个请求到达(例如,你必须做一个单独的查询 
 对于每个查询),而在批处理,您可以组合(如任务。 
 制作一个连接)。在服务时,你在做在线处理,而 
 培训是一个批处理任务。然而,有一些东西 
 可以重用代码。例如,您可以创建一个对象 
 特定于您的系统,任何查询或连接的结果 
 存储在一个人类可读的方式,和错误很容易被测试。然后, 
 一旦你收集的所有信息,在服务或培训,你 
 运行一个常见的方法以人类可读的对象之间的桥梁 
 特定于您的系统,任何格式的机器学习系统 
 预计。这 
 消除training-serving倾斜的来源。作为一个 
 推论,尽量不要使用两个不同的编程语言之间的培训 
 和服务。这一决定将使它几乎不可能让你分享 
 代码。 
 一般来说,衡量绩效模型的数据聚集后的数据 
 你训练模型,更好地反映在您的系统将做什么 
 生产。如果你产生一个模型基于数据直到1月5日,测试 
 模型在数据从1月6日。你会期望性能 
 新数据将不那么好,但它不应该彻底恶化。 
 因为每天会有影响,你可能无法预测的平均点击 
 率和转化率,但曲线下的面积,这代表了 
 的可能性给予积极的得分高于负面的例子 
 例子,应该相当接近。 
 在一个过滤任务中,没有显示标记为负面的例子 
 用户。假设您有一个过滤块75%的负面例子 
 在服务。你可能会吸引额外的训练数据 
 实例显示给用户。例如,如果一个用户将电子邮件标记为垃圾邮件 
 过滤器允许通过,你可能想要从中学习。 
 但是这种方法介绍了抽样偏差。如果您可以收集更清洁的数据 
 而不是在标签为您服务1%的交通“伸出”,并发送 
 伸出的例子给用户。现在你的过滤器阻塞至少74%的 
 负面的例子。这些例子可以成为你的训练数据。 
 请注意,如果你的过滤器阻塞95%或更多的负面例子,这个 
 方法就变得不那么可行。即便如此,如果你想测量服务 
 性能,您可以使一个更小的样本(0.1%或0.1%)。十 
 千例子足以准确估计性能相当。 
 当您切换你的排名算法完全不同的结果 
 出现,有效地改变了数据,你的算法 
 看到的未来。这种倾斜会出现,你应该设计 
 模型。有多种不同的方法。这些方法是 
 所有方法来支持数据模型已经见过。 
 内容的位置显著影响可能的用户是如何交互的 
 用它。如果你把一个应用程序在第一位置点击更多, 
 ,你就会相信它更有可能被点击。处理的一种方法 
 这是添加位置特性,即功能的位置 
 内容页面。你训练你的模型位置特性,和它 
 学会了重量,例如,功能“1日­地位”。你的模型 
 从而使体重减少其他因素例如“1日­位置= true”。 
 然后在服务你不给任何实例的位置特性,或者你给 
 他们所有人相同的默认功能,因为你得分候选人之前 
 已经决定的顺序来显示它们。 
 注意,重要的是要保持任何位置特性有些分开 
 之间的这种不对称模型的其余部分,因为训练和测试。 
 的模型是一个函数的总和的位置和特性 
 其余的功能特性是比较理想的。例如,不交叉 
 位置与任何文档的功能特性。 
 有几件事情可以导致最一般意义上的倾斜。 
 此外,你可以把它分成几个部分: 
 会有某些迹象表明达到第二阶段结束。 
 首先,你每月的收益将会减少。你将开始 
 指标之间的权衡:你会看到有些上升和下降一些 
 实验。这是非常有趣的地方。自从获得更难 
 实现,机器学习将更加成熟。警告:这 
 部分已无价值的规则比先前部分。我们已经看过很多团队 
 经过第一阶段和阶段的幸福时光 
 二世机器学习。一次阶段 
 三世已经达到,团队必须找到自己的道路。 
 当你测量高原,您的团队将开始看问题 
 的范围之外的目标当前机器学习系统。作为 
 之前提到的,如果产品目标不受现有的算法 
 目标,你需要改变你的目标或产品目标。为 
 实例,您可以优化点击,保险,或下载,但使发射 
 决策部分基于人类的评级机构。 
 爱丽丝有一个知道减少物流损失预测安装。她 
 添加一个特性。物流损失下降。当她做现场试验, 
 将安装加息。然而,当她去启动审查 
 会议上,有人指出,每日活跃用户的数量下降了5%。 
 团队决定不发布模型。爱丽丝很失望,但是现在 
 意识到发射决策取决于多个标准,只是其中的一些 
 可以直接使用毫升优化。 
 事实是,现实世界并不龙与地下城:没有“打击 
 点”确定的健康产品。团队使用 
 数据采集,试图有效地预测该系统将多好 
 在未来。他们需要关心订婚,1天活跃用户(道),30岁 
 道、收入和广告商的投资回报。这些指标 
 强度A / B测试本身只是一个代理更久­术语 
 目标:满足用户,增加用户,满足合作伙伴,和利润, 
 甚至你可以考虑代理有一个有用的,高质量的 
 产品和五年后一个蓬勃发展的公司。 
 唯一容易发射决策是当所有指标得到更好的(或者至少做的 
 没有变得更糟)。如果团队有一个选择一台复杂的机器 
 学习算法,一个简单的启发式,如果简单的启发式 
 在所有这些指标更好的工作,它应该选择启发式。此外, 
 没有明确的排名所有可能的度量值。具体地说,考虑到 
 以下两种情况: 
 如果当前系统是一个,那么团队不太可能切换到b 
 当前系统是B,那么团队不太可能切换到这 
 似乎与理性行为相冲突;然而,预测的变化 
 指标可能会或可能不会成功,因此存在着巨大的风险 
 要么改变。每个指标涵盖了有关团队的一些风险。 
 此外,没有指标涵盖了团队的终极关怀,“我的产品 
 五年后会”? 
 个人,另一方面,倾向于一个目标 
 直接优化。大多数机器学习工具支持这样一个环境中。一个 
 工程师敲出的新特性可以源源不断的发射在这样一个 
 环境。有一种机器学习,多目标学习, 
 开始解决这个问题。例如,一个可以制定一个 
 约束满足问题下界在每个指标,和 
 优化一些指标的线性组合。然而,即便如此,并不是所有的 
 指标很容易把机器学习目标:如果一个文档 
 点击或安装一个应用程序,这是因为所示的内容。但 
 得难以找出用户访问你的网站的原因。如何预测 
 未来成功的网站作为一个整体 
 AI-complete:和电脑一样难 
 视觉或自然语言处理。 
 统一模型的原始特性和直接排内容 
 简单的模型调试和理解。然而,一个模型(a 
 “模型”相结合的其他模型)可以更好地工作。保持 
 简单,每个模型应该是一个整体的输入 
 其他模型、基本模型把许多功能,但不能两者兼得。如果你有 
 模型的其他模型,分别训练,然后结合他们 
 可能导致b 
 广告行为。 
 合奏,只需要使用一个简单的模型输出的“基础” 
 模型作为输入。你也想要执行这些整体模型上的属性。 
 例如,增加分数不应该产生的基础模型 
 降低整体的分数。同样,最好是如果传入的模型 
 语义解释的(例如,校准),这样的变化 
 潜在的模型不混淆整体模型。同时,执行的 
 增加一个基本分类器预测的概率的没有 
 降低整体的预测概率。 
 你已经添加了一些关于用户的人口统计信息。你已经添加了一些 
 文档中的词的信息。你已经通过模板 
 探索和优化正规化。你没见过发射更多 
 比1%的改进你在几个季度关键指标。现在怎么办呢? 
 是时候开始完全不同的基础设施建设 
 特性,比如文件的历史,这个用户的访问 
 最后一天,一周,或一年,或数据从不同的属性。使用 
 wikidata 
 实体或贵公司内部的东西(比如谷歌 
 知识图)。使用深 
 学习。开始调整你的期望多少回报 
 你期望的投资,扩大你的努力。在任何 
 工程项目,你必须权衡添加新功能的好处 
 的成本增加了复杂性。 
 一组内容的多样性可以意味着许多东西,的多样性 
 源的内容是最常见的一种。个性化意味着每 
 用户有自己的结果。相关性意味着一个特定的结果 
 查询更适合查询比任何其他。因此这三个 
 这些属性定义为不同于普通的。 
 问题是,普通的往往是很难被击败。 
 注意,如果您的系统是测量点击,时间,手表,+ 1, 
 reshares等等,你测量的内容。团队 
 有时试图学习个人模型与多样性。个性化,他们添加 
 特性,将使系统个性化(代表的一些特性 
 用户的兴趣)或多元化(指示如果这个文档有任何功能 
 特性与其他文档返回,如作者或内容), 
 并发现这些特性得到更少的重量(或有时不同的标志) 
 比他们预期的。 
 这并不意味着多样性、个性化或相关性没有价值。 
 指出在前面的规则,你可以发布­处理增加 
 多样性或相关性。如果你看到长远的目标,那么你可以 
 宣布多样性/相关性是有价值的,除了流行。你可以 
 然后继续使用你的博文­处理,或直接修改 
 目的基于多样性或相关性。 
 谷歌的团队得到很多动力模型预测 
 亲密联系的一个产品,它工作得很好。 
 你的朋友他们是谁。另一方面,我看过几个团队 
 斗争与个性化特征之间的产品差异。是的,似乎 
 就像它应该工作。现在,它似乎不像。有时什么 
 工作是使用原始数据从一个属性来预测行为。同时, 
 记住,即使是知道一个用户对另一个属性有历史 
 的帮助。例如,用户活动的存在对两种产品 
 指示性本身。 
 有很多机器学习在Google文件以及外部。 
 感谢大卫韦斯特布鲁克,彼得•布兰德Samuel Ieong陈宇赵,李伟, 
 Michalis Potamias,埃文·罗森,巴里·罗森博格,克里斯汀•罗布森詹姆斯·松 
 Mustafa Ispir Tal震动,印度央行钱德拉,耶利米Harmsen康斯坦 
 Katsiapis,格伦·安德森,丹·达克沃斯Shishir Birmiwal,加Elidan 
 林苏, 
 吴、刘Jaihui费尔南多·佩雷拉,Hrishikesh Aradhye对于许多修正, 
 建议,对于本文档和有用的例子。同时,由于克里斯汀 
 勒费弗、Suddha苏和克里斯伯格帮助早期版本。任何 
 错误、遗漏或(喘息)不受欢迎的是我自己的意见。 
 有各种各样的对谷歌产品在本文档的引用。来 
 提供更多的上下文,我给一个简短的描述最常见的例子 
 在下面。 
 YouTube是一个流媒体视频服务。YouTube观看下一个和YouTube 
 页面团队用毫升模型等级视频推荐。看下一个建议 
 目前视频观看后打一个,而主页推荐 
 视频用户浏览主页。 
 谷歌玩有许多模型解决各种各样的问题。玩搜索,玩 
 主页个性化推荐,用户安装的应用程序都使用 
 机器学习。 
 Google +在各种情况下使用机器学习:排名的文章 
 的“流”的帖子被用户看到,排名“热”的帖子(文章 
 现在很流行),排名你认识的人,等等。 
 除非另有说明,这个页面的内容创作共用署名3.0许可下的,和代码示例是在Apache 2.0许可下的。详情,请参阅我们的网站政策。Java是甲骨文公司的注册商标和/或其附属公司。 
  
  
 上次更新2018年4月30日。 
  
  
   
  URL : https://developers.google.com/machine-learning/rules-of-ml/?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website