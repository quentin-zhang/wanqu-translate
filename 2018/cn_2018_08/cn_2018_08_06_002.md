上面的图是一个相当不错的代表在Storyblocks我们的架构。如果你不是一个有经验的web开发人员,您可能会发现它复杂。下面的走过我们深入了解之前,应该让它更平易近人每个组件的细节。 
 接下来我将介绍每一个组件,提供一个“101”介绍每个应该给你一个良好的心理模型思考web架构。我会跟进与另一个系列的文章提供具体实施建议基于我所学到在Storyblocks我的时间。 
 DNS代表“域名服务器”的骨干技术使万维网成为可能。在最基本的层面上DNS提供一键/值查找域名(例如,google.com),一个IP地址(例如,85.129.83.120),这是需要为了你的电脑请求路由到合适的服务器。类推电话号码,域名和IP地址的区别之间的区别是“John Doe”和“电话201-867-5309。“就像你需要电话簿查找约翰的数量在过去,你需要DNS查找域名的IP地址。所以你可以把互联网DNS的电话簿。 
 还有很多细节我们可以进入这里,但是我们将跳过它,因为它不是我们的101年水平介绍的关键。 
 在负载平衡深入细节之前,我们需要退一步讨论水平与垂直应用程序扩展。他们的区别是什么?简言之StackOverflow文章,水平扩展规模意味着你通过添加更多的机器到你的池的资源而“垂直”扩展意味着可通过添加更多的权力(如CPU,RAM)现有的机器。 
 在web开发中,您(几乎)总是想规模水平,因为为了保持它的简单性,打破的东西。服务器随机崩溃。网络降低。整个数据中心偶尔离线。拥有多个服务器允许您计划停机,这样应用程序继续运行。换句话说,你的应用程序是“容错。“其次,水平扩展允许您最低限度夫妇不同部分应用程序的后端(web服务器、数据库、服务X,等等),他们每个人在不同的服务器上运行。最后,您可能达到的规模不可能垂直规模。没有计算机在世界大到足以做你所有的应用程序的计算。认为谷歌的搜索平台作为一个典型的例子虽然这适用于公司在小得多的尺度上。Storyblocks,例如,150年到400年AWS EC2实例在任何给定的时间点上。它将挑战提供整个计算能力通过垂直扩展。 
 好吧,回到负载平衡器。他们神奇的酱汁,使横向扩展成为可能。他们传入的请求路由到其中一个应用程序服务器,通常是克隆/镜像彼此并将应用服务器的响应发送回客户端。任何其中一个应该以同样的方式处理请求所以它只是一种请求分布到各个组服务器,所以他们都没有超载。 
 就是这样。概念上负载平衡器是相当直接的。引擎盖下面有一定的并发症,但没有对我们的101年版需要潜水。 
 在高级别上的web应用程序服务器是相对简单的描述。他们执行核心业务逻辑来处理用户的请求并返回HTML到用户的浏览器。为了完成他们的工作,他们通常与各种后端基础设施(如数据库、缓存层,工作队列、搜索服务、其他microservices数据/日志队列等等。正如上面提到的,你通常有至少两个,通常更多,插入一个负载均衡器来处理用户请求。 
 你应该知道 
 应用服务器的实现需要选择特定的语言(节点。Scala js、Ruby、PHP、Java,c#。净等)和web MVC框架的语言(表达为节点。js,Ruby on Rails,玩Scala,Laravel PHP,等等)。然而,深入这些语言和框架的细节超出了本文的范围。 
 所有现代web应用程序利用一个或多个数据库来存储信息。数据库提供的方式定义数据结构,插入新的数据,发现现有的数据,更新或删除现有的数据,在数据执行计算,等等。在大多数情况下,web应用程序服务器的直接对话,就像服务器的工作。另外,每个后端服务可能有它自己的数据库与应用程序的其余部分。 
 虽然我避免深潜水为每个架构组件特定的技术,我做你的伤害,更不用说未来数据库的详细级别:SQL和NoSQL。 
 SQL代表“结构化查询语言”,是在1970年代发明提供一种标准的方式查询关系数据集的访问一个广泛的观众。SQL数据库存储数据的表连接在一起通过常见的IDs,典型的整数。我们走过一个简单的示例存储历史为用户地址信息。你可能有两个表、用户和user_addresses相连的用户id。下图为一个简单的版本。表链接,因为user_id user_addresses列是一个“外键”id列在用户表中。 
 如果你不了解SQL,我强烈推荐走过这样的教程你可以找到在可汗学院。它无处不在的web开发所以你至少要知道基本以适当的应用程序架构师。 
 NoSQL代表“非SQL”,是一套新的数据库技术已经出现来处理大量的数据,可以由大型web应用程序(大多数变异的SQL规模水平不太好,只能垂直扩展到某一个点)。如果你不知道任何关于NoSQL,我建议从一些高水平这样的介绍: 
 我也会记住,总的来说,产业调整为NoSQL数据库SQL接口甚至你真的应该学习SQL如果你不知道它。几乎没有办法避免它。 
 缓存服务提供了一个简单的键/值数据存储,可以保存和查找信息在接近O(1)时间。应用程序通常利用缓存服务节省昂贵计算的结果,这样可以从缓存检索结果而不是验算他们下次他们需要。从数据库查询应用程序可能缓存结果,调用外部服务,HTML对于给定的URL,和更多。这里有一些例子来自真实世界的应用程序: 
 两种最普遍的缓存服务器技术是复述和Memcache。我将在另一篇文章详细。 
 大多数web应用程序需要做一些幕后工作异步这不是直接与响应用户的请求。例如,谷歌需要爬行和索引整个网络为了返回搜索结果。它不这样做你每次搜索。相反,它爬行web异步更新搜索索引。 
 虽然有不同的体系结构,使异步工作要做,最普遍的就是我所说的“作业队列”架构。它包含两个组件:一个队列需要运行的“工作”和一个或多个作业服务器(通常称为“工人”)运行队列中的工作。 
 工作队列存储列表需要异步运行的工作。最简单的是尽管大多数应用先进先出(FIFO)队列 
 国家统计局最终需要某种优先排队系统。每当要运行的应用程序需要一个工作,在一些定期或由用户操作,它只是增加了适当的工作队列中。 
 Storyblocks,例如,利用工作队列权力很多幕后工作需要支持我们的市场。我们运行工作编码视频和照片,华禾投资过程的元数据标签,总用户统计数据,发送密码重置邮件,等等。我们开始用一个简单的FIFO队列虽然我们升级到一个优先队列,以确保对时间敏感的操作,比如发送密码重置邮件尽快完成。 
 作业服务器流程工作。他们调查作业队列,以确定如果有工作要做,如果有,他们流行一个工作队列并执行它。底层的语言和框架的选择是,许多web服务器所以我不会在本文中深入细节。 
 许多(如果不是大多数web应用程序支持某种形式的搜索功能,用户提供了一个文本输入(通常称为“查询”)和应用程序返回最“相关”的结果。技术驱动的功能通常被称为“全文搜索”,它利用一个反向索引快速查找包含查询关键字的文档。 
 虽然可以做全文搜索直接从数据库(例如,MySQL支持全文搜索),这是典型的运行一个单独的“搜索服务”,计算并存储反向索引并提供查询接口。今天最流行的全文搜索平台Elasticsearch虽然有其他选项如斯芬克斯或Apache Solr。 
 一旦应用程序达到一定规模,可能会有一定的“服务”雕刻成作为独立的应用程序运行。他们没有接触到外部世界,但与之交互的应用程序和其他服务。例如,Storyblocks有几个操作和规划服务: 
 今天,公司生死基于他们如何利用数据。这些天几乎每一个应用程序,一旦达到一定规模,利用一个数据管道,以确保数据可以收集、存储和分析。一个典型的管道有三个主要阶段: 
 另一个步骤不是架构图如图所示:加载数据从应用程序和服务的操作数据库到数据仓库。例如在Storyblocks我们负载VideoBlocks AudioBlocks,Storyblocks,账户服务,每天晚上和贡献者门户数据库到红移。这提供了我们的整体数据集的分析师共存的核心业务数据与我们的用户交互事件数据。 
 “云存储是一个简单的、可伸缩的存储、访问和共享数据在互联网上“AWS。您可以使用它来存储和访问或多或少你会存储在本地文件系统上能够与之交互的好处通过通过HTTP RESTful API。Amazon的S3提供云存储可用是迄今为止最受欢迎的今天,我们依靠广泛在Storyblocks存储视频,照片,和音频的资产,我们的CSS和Javascript,用户事件数据和更多。 
 CDN代表“内容分发网络”和服务的技术提供了一种资产,如静态HTML、CSS、Javascript、图像通过网络速度远远超过服务从一个源服务器。它通过分发内容在许多世界各地的“边缘”服务器,以便用户最终从“边缘”服务器下载资产而不是原始服务器。例如在下面的图片中,一个用户在西班牙与起源服务器请求的web页面站点在纽约,但是静态资产为页面从服务器加载一个CDN“边缘”在英国,防止许多缓慢cross-Atlantic HTTP请求。 
 查看本文更全面的介绍。一般来说一个web应用程序应该始终使用CDN服务CSS,Javascript,图片,v 
 录像和其他资产。一些应用程序也可以利用CDN服务静态HTML页面。 
 这是一个包装在101年Web架构。我希望你觉得这有用。我希望201年后的一系列文章,提供深入其中一些组件在接下来的一两年。 
 从一个快速起立鼓掌欢呼,鼓掌能表示你吃得多喜欢这个故事。 
 @StoryblocksCo工程副总裁。在@APTtestandlearn以前@McKinsey顾问,软件工程师。天主教徒,丈夫,两个孩子的父亲,攀岩者。 
 VideoBlocks如何成功地从单个开发人员管理产品和工程团队超过25和增长 
  
   
  URL : https://engineering.videoblocks.com/web-architecture-101-a3224e126947?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website