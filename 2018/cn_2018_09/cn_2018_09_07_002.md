 
 当前问题:05年失败 
 下一个问题:06 
 < br / > 
 今天订阅或购买个人问题。 
 < br / > 
 已经一个订户?更新你的地址或帐号登录详细信息。 
 < br / >一个工程师推着一个小变化和OkCupid上升着火了。< br / > 
 < br / >的第一件事我学会了在学习如何编写软件是如何编写测试软件。第一次你写的代码来执行某种task-say,找到一个数的平方根。然后你写更多的代码来测试是否第一段代码做了你想要的。函数返回正确的值吗?2的平方根4吗?< br / >我认为这种类型的测试是荒谬的。如果你写的软件漏洞,为什么您写检查的软件,软件会有更少的车吗?发生在我身上很多:我花20分钟试图找出为什么我测试说我的计划被打破只有意识到测试本身坏了。< br / >但我发现更令人不安的是,为了编写有效的测试,一个程序员必须知道所有的方式,一个软件来编写测试失败的情况。如果她忘了1的平方根是未定义的,她从来没有为它编写一个测试。但是,很显然,如果你知道你的错误,你刚刚修复它们。错误通常隐藏在我们忘记的地方。< br / >我的第一个老板,在线约会网站OkCupid,也没有喋喋不休的测试。在某种程度上,这是因为我们公司太小了。只有7个国家的工程师和我保持所有的代码运行在我们的服务器,使测试工作耗时且容易出错。“我们不能牺牲前进动力技术债务,“当时麦克格言告诉我,指的是幕后技术工程师建造的成本,而不是面向用户的功能。“用户不关心。”他认为测试框架是学术,比实际更崇高。< br / >相反,我们一直从打破了站点的方式推动更新一小部分用户,看发生了什么事。什么事故吗?延迟增加了吗?用户报告新问题吗?他们的想法是,发现错误的最好方法是使软件真正的网站流量和快速响应与一个补丁或回滚,如果必要的。< br / >,也许这是一个明智的方法一个小工程团队。但是当我第一次开始在OkCupid,我觉得可怕。大约四个月,我被分配到构建一个功能,强调成员的利益上市profiles-things像“无限的玩笑,”“冥想”,“肮脏的投影仪”——OkCupid工作人员看到。因为这是一个内部功能,用户无法访问,风险低。< br / >,我偏执破坏网站,一拖再拖。我的老板,时任David Koh工程开始注意。“我知道这很吓人,”他告诉我最后一天工作,“但你要扣动扳机和启动代码。很快你会不思考。”他告诉我将更新第二天,当他走出办公室。< br / >我很紧张改变没有大卫救我如果有什么差错。但是,不可否认,我的更新是很微不足道的。第二天早上,我的尾巴,我问迈克CEO,他也是OkCupid最好的工程师,看看我的代码。“你只添加了一些功能,”他说,在他的监控阅读我的台词。“看起来很好。“我觉得愚蠢占用他的时间如此微不足道的东西。< br / >我推出了新代码为用户和观看了统计数据的一小部分。一切似乎都很好。我将更改到其他网站和零食。当我回来的时候,一切都是绝对不是好。网站已经越来越慢, 
 nd成为完全没有响应。从单层的办公室的角落里,头操作的喊道,“服务器都着火了。到底是怎么回事?”< br / >“这一定是我,”迈克喊回来。迈克和我都部署代码几乎完全相同的时候,一个开发以来的禁忌时打破了(就像现在),你不知道谁是罪魁祸首。但当迈克扭转他的改变没有影响,他被卡住了。不会过多久OkCupid服务器变得如此迟钝的我们甚至不能够连接到他们来推动我们的修复。< br / >的午餐,我们仍然没有救了。OkCupid用户开始在Twitter上注意:< br / >“@okcupid我怎么让我每日享受到的破碎排斥和情感羞辱如果你的网站是下来? ? ? ?“< br / >”Okcupid停止工作在午餐时间,纽约奇迹如果我们致力于我们手机的人从现在开始,恐慌在街上“< br / >”@okcupid我怎么能继续被忽略的女性世界,如果他们不知道我忽略我? !#恐慌# freakout”< br / >的更多的时间流逝,我变得更有信心,通过消除的过程,我撤下。我阅读每个文件改变了代码行我写,甚至我没有的。最后,我发现这个错误。看起来是这样的:< br / >如果(数据库抛出一个错误){无所事事} < br / >这是一个错误,甚至我没有写。我刚刚触发它。但这是一个糟糕的错误,一个在适当的circumstances-circumstances,我不幸的创造不仅OkCupid服务器崩溃还喷出放射性垃圾进入我们的缓存和数据库,使复苏尤其困难。我吓坏了。< br / >怎么能这样一个微小的变化这样一个巨大的影响在网站上?“同样的故事发生很多不同的时间,“我的旧老板大卫告诉我。“有人发起了一场小,相对无害的变化做一个数以百万计的意想不到的事情可以做,然后碰巧打破一些网站的一部分,然后把它有时也把它下来,我们不能恢复它几个小时。“当我看到他在办公室后的第二天早上我打破了网站,完全苦恼,他安慰我说,网站停机的成本只是依靠这样一个小的工程团队。< br / >但即使是大公司也容易造成危机看似无害的行为。2017年2月,亚马逊不小心了大片互联网的一名员工时,试图调试公司的S3服务,输入一个命令不正确。因为成千上万的公司使用S3存储数据,误差取下吨的网站,包括Quora,Giphy和松弛。具有讽刺意味的是,Amazon的S3状态指示器依赖S3,这就是为什么它错误地报道说,服务中断期间工作得很好。< br / >对大多数企业来说,然而,软件崩溃不是丧钟。如果你不是建筑自动驾驶汽车,存储敏感信息,或支持的数据骨干网络,它可能并不重要,如果一个错误中断服务。没事的,例如,如果一个免费的在线约会网站停机一小时或者半天。事实上,它可能是更好的商业贸易从bugginess前进动量精神背后Facebook的老口号“快速行动和打破的东西。“< br / >当你允许自己构建不完善的系统,你开始工作differently-faster,更具雄心。你知道有时候系统会下降,你需要修理它,但是没关系。”很容易解决问题这一事实意味着你得到这个方法你认为,“让我们尽可能快的一个破碎的东西,我们想要的,然后我们就修复它,“”大卫说。这并不一定是坏事,因为防止错误本质上是困难的。” 
 即使你花了很多时间试图让事情是完美的,你不一定会成功,”他解释道。< br / > OkCupid是一个复杂的网站。我们曾试图让它完美,它可能没有在第一时间来存在。< br / >但软件是建立在其他软件。你工作不仅与您自己的代码,代码从你的同事和第三方软件库。如果这些依赖项车或复杂或不直观的方式运行着,错误就会渗透到软件依赖于他们。< br / > Equifax数据泄露,泄露一些1.479亿在2017年9月美国人的私人信息。Equifax是容易受到攻击,不是因为一个bug引入自己的工程师之一,而是因为一个错误的代码,Equifax的软件是建立在前需流行的开源框架称为Apache Struts。< br / >,错误已经存在于Struts自2008年以来却被忽视,直到2017年,当Apache终于发布了一个补丁。直到他们安装了补丁,成千上万的公司使用Struts-including银行和政府机构可删节。< br / >然而Equifax直到两个月后才安装补丁发布的Apache。为什么延误?根据Equifax高管的证词在众议院能源和商务委员会之前,问题是双重的:第一,员工的工作报告,一个补丁是必要的没有。第二,一个错误在软件脚本用来标记已知的漏洞Equifax软件堆栈的失败。< br / >即使Equifax曾试图安装补丁,它不会是一个简单的更新。Ars Technica报道,补丁是很难安装和可以打破现有的系统,可能会引入新的错误。这帮助解释了为什么,根据软件供应商Sonotype,一些46557年公司甚至脆弱的Struts版本下载补丁后出来了。< br / >也许Equifax草率的安全程序及其违反完全可以预防的。但是对我来说很容易想象未来的错误同样灾难性的后果,不是那么容易归咎于无能。最复杂的软件今天是复合,组成的交织模块写的许多不同的程序员,甚至许多不同的组织。这些代码塔成长越高,就越困难,了解他们的各种组件交互。< br / >这是这个原因,我自己的错误在OkCupid那么糟糕。我写了一个函数,要求数据库给我的数据不存在。它应该返回一个错误,停止这个项目。但是因为我的一个错误的依赖代码错误,我发现阅读代码的那天crash-my程序没有错误,而是保持稳步前行,好像什么事也错了。它使消费越来越多的记忆,最终吃到几乎每一个项目在我们的服务器上运行。这就是为什么OkCupid网站放缓变得不可用。< br / >最糟糕的部分也许如何我OkCupid坠毁,我还是太绿知道如何修复它。我唯一能做的就是坐在我的桌子在无所事事地团结在我的同事我摧毁重建。我们住在办公室直到9点。从那时起,我开始意识到意外骨折一个系统可以旅行。< br / >“我听说你昨天一个令人兴奋的一天,“我的老板大卫说第二天早上。苦恼,我确信我被解雇。但我没有,相反,我在接下来的三个月焦急地试图向我的同事证明我不是完全无能。我再也没有关闭了网站,也许是因为我code-launching感官被PTSD-induced增强肾上腺素。< br / >也许我还是伤痕累累还是普遍悲观,但总的来说,我倾向于认为所有足够大,复杂的软件很容易这样的崩溃。 
 几乎可以肯定是不可能的,以防止所有的缺陷,因为代码是复合,甚至难以思考那些错误的后果。今天一个成功的开发人员需要像她那样擅长写代码代码什么时候爆炸灭火。< br / >戴尔马科维茨是一个软件工程师,数据科学家生活在纽约。< br / >这篇文章出现在逻辑的第五个问题,“失败”。订购这个问题,在我们的商店。接受未来的问题,订阅。< br / > <回目录< br / > 
  
 URL : https://logicmag.io/05-the-servers-are-burning/?utm_source=wanqu.co&utm_campaign=Wanqu+Daily&utm_medium=website